<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Students</title>
</head>
<body>
<h1>Students grades</h1>
<form th:action="@{/teacher/getStudentsGrades}" method="post" th:object="${studentTeacherDTO}">
    <select th:field="*{subjectId}">
        <option th:each="subject : ${studentTeacherDTO.subjects}"
                th:value="${subject.id}"
                th:text="${subject.name}"></option>
    </select>
    <input type="submit" value="Select Subject">
</form>

<div th:each="student : ${studentTeacherDTO.students}">
    <h3><span th:text="${student.firstName}"></span> <span th:text="${student.lastName}"></span>
        <form th:action="@{/teacher/createGrade}" method="post" style="display:inline;">
            <input type="hidden" name="studentId" th:value="${student.id}"/>
            <input type="hidden" name="subjectId" th:value="${studentTeacherDTO.subjectId}"/>
            <button type="submit">Add grade</button>
        </form>
    </h3>
    <ul>
        <li th:each="grade : ${student.grades}">
            <span th:text="${grade.date}"></span>
            <span th:text="${grade.grade}"></span>
            <span th:text="${grade.comment}"></span>
            <span> <input type="button" value="Update grade"
                          th:onclick="|window.location.href='/teacher/updateGrade?gradeId=${grade.id}'|"/></span>
            <span> <input type="button" value="Delete grade"
                          th:onclick="|window.location.href='/teacher/deleteGrade?gradeId=${grade.id}'|"/></span>
        </li>
    </ul>
</div>
</body>
</html>